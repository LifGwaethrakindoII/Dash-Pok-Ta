using System.Collections;
using System.Collections.Generic;
using UnityEngine;

public class Xbox360Controller : BaseController
{
	//----------------------------------------------------------------------------------------------------------------------------------------------------
	//|	Xbox 360 Controller Axises: 																													 |
	//|--------------------------------------------------------------------------------------------------------------------------------------------------|
	//|	Input: 			  	|	Platform: 			  		   	 |	Notes: 																				 |
	//|---------------------|------------------------------------|---------------------------------------------------------------------------------------|
	//|					  	|	Windows  |	Mac Os X  |	 Linux   |																						 |
	//|---------------------|------------------------------------|---------------------------------------------------------------------------------------|
	//|	Axis Name 		  	|		Mapped Axis Number 	       	 |																						 |
	//|---------------------|------------------------------------|---------------------------------------------------------------------------------------|
	//|	Left Stick X Axis 	|	x axis 	 |	x axis 	  |	 x axis  |																						 |	
	//|---------------------|------------|------------|----------|---------------------------------------------------------------------------------------|
	//|	Left Stick Y Axis 	|	y axis 	 |	y axis 	  |	 y axis  |																						 |	
	//|---------------------|------------|------------|----------|---------------------------------------------------------------------------------------|
	//|	Right Stick X Axis	| 		4 	 |		3 	  |		4  	 |																						 |
	//|---------------------|------------|------------|----------|---------------------------------------------------------------------------------------|
	//|	Right Stick Y Axis	| 		5 	 |		4 	  |		5  	 |																						 |
	//|---------------------|------------|------------|----------|---------------------------------------------------------------------------------------|
	//|	D-Pad X Axis 	  	|	  	6	 |			  |		7  	 |	On Linux, only wired controllers support using the D-Pad as 						 |
	//|						| 			 |			  |			 |	axises 																				 |
	//|---------------------|------------|------------|----------|---------------------------------------------------------------------------------------|
	//|	D-Pad Y Axis 	  	|		7 	 |			  |		8  	 |																						 |
	//|---------------------|------------|------------|----------|---------------------------------------------------------------------------------------|
	//|	Triggers 		  	|		3 	 |			  |		   	 |	The left trigger is represented by the range -1 to 0, while 						 |
	//|						|			 |			  |			 |	the right trigger is represented by the range 0 to 1.								 |
	//|---------------------|------------|------------|----------|---------------------------------------------------------------------------------------|
	//|	Left Trigger 	  	|		9 	 |		5 	  |		3  	 |	Windows supports a 0 to 1 range for both triggers. Mac OS X 						 |
	//|---------------------|------------|------------|----------|	supports -1 to 1, however the trigger initially starts at 0 until it is first used.	 |
	//|	Right Trigger		|		10	 |		6	  |		6	 |		 																				 |
	//----------------------------------------------------------------------------------------------------------------------------------------------------

	//----------------------------------------------------------------------------------------------------------------------------------------------------
	//|	Xbox 360 Controller Buttons: 																													 |
	//|--------------------------------------------------------------------------------------------------------------------------------------------------|
	//|	Input: 			  	|	Platform: 			  		   	 |	Notes: 																				 |
	//|---------------------|------------------------------------|---------------------------------------------------------------------------------------|
	//|					  	|	Windows  |	Mac Os X  |	 Linux   |																						 |
	//|---------------------|------------------------------------|---------------------------------------------------------------------------------------|
	//|	Button Name 	  	|		Mapped Button Number 	   	 |																						 |
	//|---------------------|------------------------------------|---------------------------------------------------------------------------------------|
	//|	A Button			|	 	0 	 |	    16	  |	    0 	 |																						 |	
	//|---------------------|------------|------------|----------|---------------------------------------------------------------------------------------|
	//|	B Button 			|		1	 |	 	17	  |	 	1  	 |																						 |	
	//|---------------------|------------|------------|----------|---------------------------------------------------------------------------------------|
	//|	X Button			| 		2 	 |		18 	  |		2  	 |																						 |
	//|---------------------|------------|------------|----------|---------------------------------------------------------------------------------------|
	//|	Y Button			| 		3 	 |		19 	  |		3  	 |																						 |
	//|---------------------|------------|------------|----------|---------------------------------------------------------------------------------------|
	//|	Left Bumper 	  	|	  	4	 |		13	  |		4  	 |																						 |
	//|---------------------|------------|------------|----------|---------------------------------------------------------------------------------------|
	//|	Right Bumper	  	|		5 	 |		14	  |		5  	 |																						 |
	//|---------------------|------------|------------|----------|---------------------------------------------------------------------------------------|
	//|	Back Button 	  	|		6 	 |		10	  |		6    |																						 |
	//|---------------------|------------|------------|----------|---------------------------------------------------------------------------------------|
	//|	Start Button	  	|		7 	 |		9 	  |		7  	 |	 																					 |
	//|---------------------|------------|------------|----------|---------------------------------------------------------------------------------------|
	//|	Left Stick Click	|		8	 |		11	  |		9	 |		 																				 |
	//|---------------------|------------|------------|----------|---------------------------------------------------------------------------------------|
	//|	Right Stick Click	|		9	 |		12	  |		10	 |		 																				 |
	//|---------------------|------------|------------|----------|---------------------------------------------------------------------------------------|
	//|	D-Pad Up			|			 |		5	  |		13	 |		 																				 |
	//|---------------------|------------|------------|----------|																						 |
	//|	D-Pad Down			|			 |		6	  |		14	 |		 																				 |
	//|---------------------|------------|------------|----------|	On Linux, only wireless controllers support using the D-Pad as buttons.				 |
	//|	D-Pad Left			|			 |		7	  |		15	 |		 																				 |
	//|---------------------|------------|------------|----------|																						 |
	//|	D-Pad Right			|			 |		8	  |		16	 |		 																				 |
	//|---------------------|------------|------------|----------|---------------------------------------------------------------------------------------|
	//|	Xbox Button			|			 |		15	  |			 |		 																				 |
	//|---------------------------------------------------------------------------------------------------------------------------------------------------

	public const int JoystickNameLength = 33; /// <summary>Joystick Name string length.</summary>

	/// <summary>Xbox360Controller Constructor.</summary>
	public Xbox360Controller()
	{
		InputMappings = SetInputMappings();
	}

	/// <summary>(Override) Sets InputMapping.</summary>
	/// <returns>Newly setted Input Mappings.</returns>
	public override Dictionary<InputCommands, KeyCode> SetInputMappings()
	{
		Dictionary<InputCommands, KeyCode> newMappings = new Dictionary<InputCommands, KeyCode>();

#if UNITY_STANDALONE_WIN
		newMappings.Add(InputCommands.Dash, KeyCode.JoystickButton2);
		newMappings.Add(InputCommands.Run, KeyCode.JoystickButton10);
		newMappings.Add(InputCommands.Jump, KeyCode.JoystickButton0);
#endif

		return newMappings;
	}

	/// <summary>(Override) Gets orientation axis.</summary>
	/// <param name="_axis">Evaluated axis.</param>
	/// <returns>Normalized axis orientatin.</returns>
	public override float GetAxis(InputCommands _axis)
	{
		switch(_axis)
		{
			case InputCommands.HorizontalAxis:
			return Input.GetAxis("HorizontalJoystick");
			break;

			case InputCommands.VerticalAxis:
			return Input.GetAxis("VerticalJoystick");
			break;

			default:
			Debug.LogError(_axis.ToString() + " does not belong to axis range.");
			break;
		}

		return 0f;
	}

	/// <summary>(Override) Gets input down.</summary>
	/// <param name="_axis">Evaluated input.</param>
	/// <returns>Input being down (boolean).</returns>
	public override bool GetInputDown(InputCommands _input)
	{
		return Input.GetKeyDown(InputMappings[InputCommands.Jump]);
		//return false;
	}

	/// <summary>(Override) Gets input up.</summary>
	/// <param name="_axis">Evaluated input.</param>
	/// <returns>Input being up (boolean).</returns>
	public override bool GetInputUp(InputCommands _input)
	{

		return false;
	}

}
